plugins {
    id 'checkstyle'
}

def copyResourceFile(String resource) {
    File dest = File.createTempFile("checkstyle", ".xml");
    InputStream source = getClass().getResourceAsStream(resource);
    dest.withDataOutputStream { os ->
        os << source
    }
    return dest;
}

checkstyle {
    configFile = copyResourceFile("/config/checkstyle.xml")
    showViolations = true
}
